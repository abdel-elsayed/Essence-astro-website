---
import { navigation } from '../data/site';
const { currentPath = '/' } = Astro.props;
---
<header class="sticky top-0 z-40 border-b border-neutral-200/80 bg-white/80 backdrop-blur">
  <div class="container flex h-16 items-center justify-between">
    <a href="/" class="font-display text-lg tracking-widest text-neutral-900">
      Essence <span class="text-brand">Med Spa</span>
    </a>
    <button
      type="button"
      class="inline-flex items-center gap-2 rounded-xl border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-900 md:hidden"
      data-menu-button
      aria-expanded="false"
      aria-controls="mobile-nav"
    >
      Menu
      <svg class="h-4 w-4" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M4 6h16M4 12h16M4 18h16"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
    <nav class="hidden items-center gap-8 text-sm text-neutral-700 md:flex">
      {navigation.map(({ name, href }) => (
        <a
          href={href}
          class={`hover:text-neutral-950 ${currentPath === href ? 'text-neutral-950 font-medium' : ''}`}
        >
          {name}
        </a>
      ))}
      <a
        href="/book"
        class="rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white shadow-soft transition hover:bg-brand-dark"
      >
        Book Now
      </a>
    </nav>
  </div>
  <nav id="mobile-nav" class="hidden border-t border-neutral-200 bg-white md:hidden" data-menu-panel>
    <div class="container flex flex-col gap-4 py-6 text-sm text-neutral-700">
      {navigation.map(({ name, href }) => (
        <a href={href} class="font-medium" data-menu-link>{name}</a>
      ))}
      <a href="/book" class="rounded-xl bg-brand px-4 py-2 text-center font-semibold text-white">
        Book Online
      </a>
    </div>
  </nav>
  <script is:inline>
    const button = document.querySelector('[data-menu-button]');
    const panel = document.querySelector('[data-menu-panel]');
    const links = panel?.querySelectorAll('[data-menu-link]');

    const close = () => {
      panel?.classList.add('hidden');
      button?.setAttribute('aria-expanded', 'false');
    };

    button?.addEventListener('click', () => {
      const expanded = button.getAttribute('aria-expanded') === 'true';
      button.setAttribute('aria-expanded', (!expanded).toString());
      panel?.classList.toggle('hidden', expanded);
    });

    links?.forEach((link) => link.addEventListener('click', close));
  </script>
</header>

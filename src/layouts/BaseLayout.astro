---
import "../styles/global.css";
const { title = "Essence MedSpa", description = "Advanced skincare & wellness. Transparent pricing. Book online." } = Astro.props;
---
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <slot name="head" />
  </head>
  <body class="bg-neutral-50 text-neutral-900 font-sans page-transition">
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b">
      <nav class="container mx-auto px-4 h-16 flex items-center justify-between">
        <a href="/" class="font-display text-xl tracking-wide">Essence <span class="text-brand">MedSpa</span></a>
        <div class="hidden md:flex gap-6 text-sm">
          <a href="/services" class="hover:text-brand">Services</a>
          <a href="/about" class="hover:text-brand">About</a>
          <a href="/contact" class="hover:text-brand">Contact</a>
        </div>
        <a href="/book" class="rounded-xl bg-brand px-4 py-2 text-white hover:bg-brand-dark transition text-sm">Book Now</a>
      </nav>
    </header>

    <main class="container mx-auto px-4"><slot /></main>

    <footer class="mt-16 border-t bg-white">
      <div class="container mx-auto px-4 py-10 grid gap-6 md:grid-cols-3 text-sm text-neutral-600">
        <div>
          <div class="font-display text-lg text-neutral-900">Essence MedSpa</div>
          <p class="mt-2">[Address Line]<br/>[City, State ZIP]</p>
          <p class="mt-2"><a href="tel:1-xxx-xxx-xxxx" class="underline">[Phone]</a></p>
        </div>
        <div>
          <div class="font-semibold text-neutral-900">Hours</div>
          <p class="mt-2">Mon–Fri 9–7, Sat 10–4</p>
        </div>
        <div>
          <div class="font-semibold text-neutral-900">Follow</div>
          <p class="mt-2 flex gap-4">
            <a class="underline" href="#">Instagram</a>
            <a class="underline" href="#">Facebook</a>
          </p>
        </div>
      </div>
    </footer>

    <script is:inline>
      const body = document.body;

      const enter = () => {
        body.classList.add("is-loaded");
        body.classList.remove("is-leaving");
      };

      if (document.readyState === "complete") {
        enter();
      } else {
        window.addEventListener("DOMContentLoaded", enter, { once: true });
      }

      window.addEventListener("pageshow", (event) => {
        if (event.persisted) enter();
      });

      document.addEventListener("click", (event) => {
        const link = event.target.closest("a");
        if (!link) return;

        if (
          link.target === "_blank" ||
          event.metaKey ||
          event.ctrlKey ||
          event.shiftKey ||
          event.altKey
        ) {
          return;
        }

        const href = link.getAttribute("href");
        if (!href) return;
        if (href.startsWith("#") || href.startsWith("mailto:") || href.startsWith("tel:")) return;
        if (link.hasAttribute("download") || link.getAttribute("rel")?.includes("external")) return;

        const url = new URL(link.href, window.location.href);
        if (url.origin !== window.location.origin) return;
        if (url.pathname === window.location.pathname && url.search === window.location.search) return;
        if (link.hasAttribute("data-no-transition")) return;

        event.preventDefault();
        body.classList.add("is-leaving");
        setTimeout(() => {
          window.location.href = link.href;
        }, 180);
      });
    </script>
  </body>
</html>
